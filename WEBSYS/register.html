<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration</title>
    <link rel="stylesheet" href="register.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        .error {
            color: red;
            font-size: 12px; /* Adjust the font size as needed */
        }
    </style>
</head>

<body>
    <div class="reg">
        <div class="background">
            <img class="backgrnd" src="icons/bg full.png" alt="bg">
        </div>
        <div class="mainLogin">
            <form action="" method="post" class="forms">
                <div class="registerTop">Register</div>

                <div class="firstName">
                    <label for="first_name">First Name</label>
                    <input type="text" id="first_name" name="first_name" placeholder="Enter First Name">
                    <div class="error"></div> <!-- Error message for first name -->
                </div>

                <div class="middleName">
                    <label for="middle_name">Middle Name</label>
                    <input type="text" id="middle_name" name="middle_name" placeholder="Enter Middle Name">
                    <div class="error"></div> <!-- Error message for middle name -->
                </div>

                <div class="lastName">
                    <label for="last_name">Last Name</label>
                    <input type="text" id="last_name" name="last_name" placeholder="Enter Last Name">
                    <div class="error"></div> <!-- Error message for last name -->
                </div>

                <div class="suffixName">
                    <label for="suffix">Suffix</label>
                    <input type="text" id="suffix" name="suffix" placeholder="Enter Suffix">
                    <div class="error"></div> <!-- Error message for suffix -->
                </div>

                <div class="Purok">
                    <label for="purok">Purok</label>
                    <select id="purok" name="purok">
                        <option value="">Select</option>
                        <option value="Purok 1">Purok 1</option>
                        <option value="Purok 2">Purok 2</option>
                        <option value="Purok 3">Purok 3</option>
                        <option value="Purok 4">Purok 4</option>
                    </select>
                    <div class="error"></div> <!-- Error message for purok -->
                </div>

                <div class="brgy">
                    <label for="barangay">Barangay</label>
                    <input type="text" id="barangay" name="barangay" value="Tamaoyan" readonly>
                </div>

                <div class="City">
                    <label for="city">City</label>
                    <input type="text" id="city" name="city" value="Legazpi City" readonly>
                </div>

                <div class="Province">
                    <label for="province">Province</label>
                    <input type="text" id="province" name="province" value="Albay" readonly>
                </div>

                <div class="Age">
                    <label for="age">Age</label>
                    <input type="number" id="age" name="age" placeholder="Enter Age">
                    <div class="error"></div> <!-- Error message for age -->
                </div>

                <div class="bday">
                    <label for="birthday">Birthday</label>
                    <input type="date" class="form-control" id="date" name="date">
                    <div class="error"></div> <!-- Error message for birthday -->
                </div>

                <div class="Status">
                    <label for="st">Status</label>
                    <select id="status" name="status">
                        <option value="">Select one</option>
                        <option value="Single">Single</option>
                        <option value="Married">Married</option>
                        <option value="Widowed">Widowed</option>
                        <option value="Divorce">Divorce</option>
                        <option value="Seperated">Separated</option>
                        <option value="Annulled">Annulled</option>
                        <option value="Live in">Live in</option>
                        <option value="Unknown">Unknown</option>
                    </select>
                    <div class="error"></div> <!-- Error message for status -->
                </div>

                <div class="citizenShip">
                    <label for="citizen_ship">Citizenship</label>
                    <input type="text" id="citizenship" name="citizenship" placeholder="Enter Citizenship">
                    <div class="error"></div> <!-- Error message for citizenship -->
                </div>

                <div class="Sex">
                    <label class="titleLabel">Sex</label>
                    <div class="male radioLabel">
                        <input type="radio" id="male" name="sex" value="male" class="radioInput">
                        <label for="male" class="radioText">Male</label>
                    </div>
                    <div class="female radioLabel">
                        <input type="radio" id="female" name="sex" value="female" class="radioInput">
                        <label for="female" class="radioText">Female</label>
                    </div>
                    <div class="error"></div> <!-- Error message for sex -->
                </div>

                <div class="voterSts">
                    <label for="voter_status">Voter Status</label>
                    <select id="voter_status" name="voter_status">
                        <option value="">Select one</option>
                        <option value="Inactive">Inactive</option>
                        <option value="SK Voter">SK Voter</option>
                        <option value="National Voter">National Voter</option>
                        <option value="Both">Both SK and National</option>
                    </select>
                    <div class="error"></div> <!-- Error message for voter status -->
                </div>

                <div class="educ">
                    <label for="educational_attainment">Educational Attainment</label>
                    <select id="educational_attainment" name="educational_attainment">
                        <option value="">Select one</option>
                        <option value="No Formal education">No Formal education</option>
                        <option value="Primary Level">Primary Level</option>
                        <option value="Primary Education">Primary Education</option>
                        <option value="Secondary Level">Secondary Level</option>
                        <option value="Secondary Education">Secondary Education</option>
                        <option value="Vocational Level">Vocational Level</option>
                        <option value="College Level">College Level</option>
                        <option value="College Education">College Education</option>
                        <option value="Masters Level">Masters Level</option>
                        <option value="Masters Grad">Masters Grad</option>
                        <option value="Doctorate Level">Doctorate Level</option>
                        <option value="Doctorate Grad">Doctorate Grad</option>
                    </select>
                    <div class="error"></div> <!-- Error message for educational attainment -->
                </div>

                <div class="contactNum">
                    <label for="contact_number">Contact Number</label>
                    <input type="text" id="contact_number" name="contact_number" placeholder="Enter Contact Number">
                    <div class="error"></div> <!-- Error message for contact number -->
                </div>

                <div class="emailAdd">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" placeholder="Enter Email Address">
                    <div class="error"></div> <!-- Error message for email -->
                </div>

                <div class="userType">
                    <div class="radioLabel">
                        <input type="radio" name="userType" id="barangayOfficial" class="radioInput" value="official" onclick="showDropdown()">
                        <label for="barangayOfficial" class="radioText">Barangay Official</label>
                        <select id="brgypositions" name="Position" style="display: none; margin-left: 5px;">
                            <option value="">Select</option>
                            <option value="pos1">Brgy Captain</option>
                            <option value="pos2">Brgy Kagawad</option>
                            <option value="pos3">Brgy Secretary</option>
                            <option value="pos4">Brgy Treasurer</option>
                            <option value="pos5">SK Chairman</option>
                        </select>
                    </div>
                    <div class="radioLabel">
                        <input type="radio" name="userType" id="resident" class="radioInput" value="resident" onclick="hideDropdown()">
                        <label for="resident" class="radioText">Resident</label>
                    </div>
                    <div class="error"></div> <!-- Error message for user type -->
                </div>

                <!-- <a href="login.html" class="btn-back">Back</a>
                <button type="button" class="btn-next" id="nextButton">Next</button> -->
                <a href="/WEBSYS/login1.html" class="btn-back">Back</a>
                <button type="button" class="btn-next" id="nextButton">Next</button>
            </form>
        </div>
    </div>

    <script>

        var submitForm = true; 
    
        function showDropdown() {
            var dropdown = document.getElementById("brgypositions");
            dropdown.style.display = "block";
            dropdown.value = "";
        }

        function hideDropdown() {
            var dropdown = document.getElementById("brgypositions");
            dropdown.style.display = "none";
        }

        document.getElementById("nextButton").addEventListener("click", function (event) {
            console.log("Next button clicked");

            // Check if all required fields are filled in and valid
            var isValid = validateForm();

            if (!isValid) {
                event.preventDefault(); // Prevent the default action (redirecting to another page)
                return;
            }

            // If all fields are valid, proceed with redirection based on user type
            var userType = document.querySelector('input[name="userType"]:checked');
            if (userType) {
                if (userType.value === "resident") {
                    console.log("Redirecting to residentCreateAcc.html");
                    window.location.href = "residentCreateAcc.html";
                } else if (userType.value === "official") {
                    var position = document.getElementById("brgypositions").value;
                    if (position.trim() === "") {
                        console.log("Position not selected for barangay official");
                        alert("Please select a position.");
                        event.preventDefault();
                        return;
                    } else {
                        console.log("Redirecting to brgyOfficialsCreateAcc.html");
                        window.location.href = "createAccBrgyOfficial.html";
                    }
                }
            } else {
                console.log("User type not selected");
                alert("Please select a user type.");
                event.preventDefault();
                return;
            }
        });

        // Function to validate the form
        function validateForm() {
            var inputs = document.querySelectorAll('input[type="text"], input[type="email"], select');
            var isValid = true;
            inputs.forEach(function (input) {
                if (input.value.trim() === "" && !input.hasAttribute('readonly') && input.name !== 'Position' && input.name !== 'userType' && input.id !== 'middle_name' && input.id !== 'suffix') {
                    isValid = false;
                    showError(input, "This field is required.");
                }
            });

            // Validate length restrictions for name inputs
            var nameInputs = document.querySelectorAll('input[type="text"]');
            nameInputs.forEach(function (input) {
                if (input.id === "first_name" || input.id === "middle_name" || input.id === "last_name" || input.id === "suffix") {
                    if (input.value.length > 15 && input.id !== "suffix") {
                        isValid = false;
                        showError(input, "Maximum 15 characters allowed.");
                    } else if (input.value.length > 10 && input.id === "suffix") {
                        isValid = false;
                        showError(input, "Maximum 10 characters allowed.");
                    }
                }
            });

            // Validate email format
            var emailInput = document.getElementById("email");
            var emailValue = emailInput.value.trim();
            if (emailValue !== "" && !isValidEmail(emailValue)) {
                isValid = false;
                showError(emailInput, "Please enter a valid email address.");
            }

            // Validate numeric input for age
            var ageInput = document.getElementById("age");
            var ageValue = ageInput.value.trim();
            if (ageValue !== "" && isNaN(ageValue)) {
                isValid = false;
                showError(ageInput, "Please enter a valid age.");
            }

            return isValid;
        }

        // Function to validate email format
        function isValidEmail(email) {
            var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        // Display error messages
        function showError(input, message) {
            var errorDiv = input.nextElementSibling;
            errorDiv.innerText = message;
        }

        // Input fields restrictions
        var nameInputs = document.querySelectorAll('input[type="text"]');
        nameInputs.forEach(function (input) {
            if (input.id === "first_name" || input.id === "middle_name" || input.id === "last_name" || input.id === "suffix") {
                input.addEventListener("input", function () {
                    if (this.value.length > 15 && this.id !== "suffix") {
                        this.value = this.value.substring(0, 15);
                    } else if (this.value.length > 10 && this.id === "suffix") {
                        this.value = this.value.substring(0, 10);
                    }
                });
            }
        });

        // Validate email address format
        function isValidEmail(email) {
            var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }
    </script>
</body>
</html>